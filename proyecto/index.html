
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - geometry - cube</title>
		<meta charset="utf-8">
		<style>
			body {
				margin: 0px;
				background-color: #ffffff;
				overflow: hidden;
			}
		</style>
	</head>
	<body>

		<script src="js/three.min.js"></script>
		<script src="http://threejs.org/examples/js/controls/OrbitControls.js"></script>

		<script>
		/*<<<<<<< HEAD
				background-color: #ffffff;
=======
				background-color: #FFFFFF;
>>>>>>> origin/master
				overflow: hidden;
*/

			var camera, escena, renderer, curve,posicionCamera;
			var obj1, obj2, obj3, Baul ,cube6,tapa,piso;
			var angulo=0;
			var j=0, look=0,orientacion=0;
			var controls;
			var subdivision;
			var TECLA = { uno:false, dos:false, tres:false, cuatro:false, cinco:false, seis:false, siete:false };
			document.onkeyup = teclaSoltada;
			init();
			animate();

			function init() {


				curve = new THREE.CubicBezierCurve3(
					new THREE.Vector3( 900, 0, 900),
					new THREE.Vector3( 450, 0, 600 ),
					new THREE.Vector3( 0, 0, 500 ),
					new THREE.Vector3( -450, 0, 300 ),
					new THREE.Vector3( -900, 0, 100)
					
					
					
				);

				camera = new THREE.PerspectiveCamera( 90, window.innerWidth / window.innerHeight, 1, 80000 );
				camera.position.z = 600;
				camera.position.y = 300;
				camera.position.x = 120;
				if(look==0){
					posicionCamera=camera.getWorldDirection();
					look=1;
				};


				escena = new THREE.Scene();
				//escena.fog = new THREE.fog(0xFFFFFF,20000, 10000);

				var luzAmbiente = new THREE.AmbientLight(0xFFFFFF);
				escena.add(luzAmbiente);
				var luzDireccional = new THREE.DirectionalLight();
				luzDireccional.position.set(500,500,500);
				luzDireccional.intensity = 1.8;
				luzDireccional.shadowCameraVisible = true;
				luzDireccional.castShadow = true;
				luzDireccional.shadowDarkness = 1;
				


				escena.add(luzDireccional);

				var geom = new THREE.PlaneGeometry( 800, 800, 10,10 );
				var PisoTextura = THREE.ImageUtils.loadTexture('img/arena.png');
				var PisoTextura = new THREE.MeshPhongMaterial({ map:PisoTextura });
				piso = new THREE.Mesh( geom, PisoTextura );
				piso.receiveShadow = true;
				piso.castShadow = true;
				piso.position.set(0.0, -30.0, 0.0);
				piso.rotation.x +=29.85;
				escena.add( piso );

				var Cubo = new THREE.BoxGeometry( 50, 50, 50 );
				var CuboTextura = THREE.ImageUtils.loadTexture('img/crate.gif');
				var CuboTextura = new THREE.MeshPhongMaterial({ map:CuboTextura });
				obj1 = new THREE.Mesh( Cubo, CuboTextura );
				obj1.castShadow = true;
				obj1.position.set(0,0,40);
				obj1.receiveShadow = true;
				escena.add( obj1 );
				
				var esferaTextura = THREE.ImageUtils.loadTexture('img/land_ocean_ice_cloud_2048.jpg');
				var esferaMaterial = new THREE.MeshPhongMaterial({ map:esferaTextura });
				var esfera = new THREE.SphereGeometry( 30, 70, 70 )
				obj2 = new THREE.Mesh( esfera, esferaMaterial );
				obj2.position.set( -80, 0, 0 );
				obj2.castShadow = true;
				obj2.receiveShadow = true;
				escena.add( obj2 );



				var piramide = new THREE.CylinderGeometry( 0, 40, 40, 4, 1 );
				var PirTextura = THREE.ImageUtils.loadTexture('img/pira.png');
				var PirTextura = new THREE.MeshPhongMaterial({ map:PirTextura });
				obj3 = new THREE.Mesh(piramide, PirTextura);
				obj3.position.set( 80, 0, 0 );
				obj3.castShadow = true;
				obj3.receiveShadow = true;
				escena.add( obj3 );



//cara superior
				var cs1 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } ); //derecha
				var cs2 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );//izq
				var cs3 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/baul.png') } );//arriba
				var cs4 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/interiorBaul.png') } );//abajo
				var cs5 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );//adelante
				var cs6 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );//atras
				var materials1 = [cs1, cs2, cs3, cs4, cs5, cs6];
				var materiales1 = new THREE.MeshFaceMaterial( materials1 );

//cara de adelante
				var material1 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material2 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material3 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material4 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material5 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/baul.png') } );
				var material6 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/interiorBaul.png') } );
				var materials2 = [material1, material2, material3, material4, material5, material6];
				var materiales2 = new THREE.MeshFaceMaterial( materials2 );

//cara de atras
				var material1 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material2 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material3 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material4 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material5 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/interiorBaul.png') } );
				var material6 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/baul.png') } );
				var materials3 = [material1, material2, material3, material4, material5, material6];
				var materiales3 = new THREE.MeshFaceMaterial( materials3 );

//cara de lado izq
				var material1 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/interiorBaul.png') } );
				var material2 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/baul.png') } );
				var material3 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material4 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material5 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material6 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var materials4 = [material1, material2, material3, material4, material5, material6];
				var materiales4 = new THREE.MeshFaceMaterial( materials4 );
//cara de lado der

				var material1 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/baul.png') } );
				var material2 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/interiorBaul.png') } );
				var material3 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material4 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material5 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material6 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var materials5 = [material1, material2, material3, material4, material5, material6];
				var materiales5 = new THREE.MeshFaceMaterial( materials5 );

//cara de abajo
				var material1 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material2 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material3 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/interiorBaul.png') } );
				var material4 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/baul.png') } );
				var material5 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var material6 = new THREE.MeshPhongMaterial( { map: THREE.ImageUtils.loadTexture('img/ladosBaul.png') } );
				var materials6 = [material1, material2, material3, material4, material5, material6];
				var materiales6 = new THREE.MeshFaceMaterial( materials6 );


				//atras
				var geometry1 = new THREE.BoxGeometry( 300, 70, 8);
				var cube1 = new THREE.Mesh( geometry1, materiales3 );
				cube1.position.set(0.0, 5.0, -80);
				cube1.castShadow = true;
				cube1.receiveShadow = true;
				//abajo
				var geometry2 = new THREE.BoxGeometry( 300, 8, 200 );
				var cube2 = new THREE.Mesh( geometry2, materiales6 );
				cube2.position.set(0.0, -30.0, 20.0);
				cube2.castShadow = true;
				cube2.receiveShadow = true;

				//izquierda
				var geometry3 = new THREE.BoxGeometry( 8, 70, 200 );
				var cube3 = new THREE.Mesh( geometry3, materiales4 );
				cube3.position.set(-150.0, 5.0, 20.0);
				cube3.castShadow = true;
				cube3.receiveShadow = true;

				//derecha
				var geometry4 = new THREE.BoxGeometry( 8, 70, 200 );
				var cube4 = new THREE.Mesh( geometry4, materiales5 );
				cube4.position.set(150.0, 5.0, 20.0);
				cube4.castShadow = true;
				cube4.receiveShadow = true;

				//delantera
				var geometry5 = new THREE.BoxGeometry( 300, 70, 8);
				var cube5 = new THREE.Mesh( geometry5, materiales2 );
				cube5.position.set(0.0, 5.0, 120.0);
				cube5.castShadow = true;
				cube5.receiveShadow = true;

				//tapa
				tapa = new THREE.Object3D();
				var geometry6 = new THREE.BoxGeometry( 300, 6, 200 );
				cube6 = new THREE.Mesh( geometry6, materiales1 );
				cube6.position.set(0.0, 0.0, 100.0);
				cube6.castShadow = true;
				cube6.receiveShadow = true;
				tapa.position.set(0.0, 40.0, -80.0)
				tapa.add(cube6)


				subdivision = curve.getPoints(100);


				
			    escena.add( cube1 );
			    escena.add( cube2 );
			    escena.add( cube3 );
			    escena.add( cube4 );
			    escena.add( cube5 );
			    escena.add( tapa );
			    
				

				renderer = new THREE.WebGLRenderer({antialias: true});  //{antialias: true}
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				renderer.shadowMapEnabled = true;
				renderer.shadowMapSoft = true;
				//renderer.setSize( 800, 600 );
				renderer.setClearColor(0xFFFFFF)
				document.body.appendChild( renderer.domElement );
				controls = new THREE.OrbitControls(camera,renderer.domElement);
				window.addEventListener( 'resize', onWindowResize, false );

			}

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

			}
			

			function animate() {

				requestAnimationFrame( animate );

				//obj1.rotation.x += 0.005;
				obj1.rotation.y += 0.01;
				//obj2.rotation.x += 0.005;
				obj2.rotation.y += 0.01;
				//obj3.rotation.x += 0.005;
				obj3.rotation.y += 0.01;



				if (TECLA.uno) {
					if( angulo >=0 && angulo <= 180){
					tapa.rotation.x -=0.005;
					angulo += 1;
					if (angulo ==180)
						angulo=-180;
					};
					if ( angulo <0 && angulo >= -180){
						tapa.rotation.x +=0.005;
						angulo += 1;
						if (angulo ==-1)
							angulo=0;
					};

				};

				if(TECLA.dos){

					if( orientacion==0 && j >=0 && angulo <= 100){
					camera.position.x = subdivision[j].x;
					camera.position.y = subdivision[j].y;
					camera.position.z = subdivision[j].z;
					camera.lookAt(new THREE.Vector3(0,0,0));
					j-=1;
					if(j<0){
						orientacion=1;
						j=0;
						}
					};
					if ( orientacion==1 && j >=0 && j<=100){
						camera.position.x = subdivision[j].x;
						camera.position.y = subdivision[j].y;
						camera.position.z = subdivision[j].z;
						camera.lookAt(new THREE.Vector3(0,0,0));
						j+=1;
						if(j==100){
							orientacion=0;
						}
					};
											
				}else{
					camera.lookAt(posicionCamera);
				}

				
				
				renderer.render( escena, camera );

			}


			function teclaSoltada(e)
			{
			    switch (e.keyCode)
			    {
			        case 49: // 1
			        	if (TECLA.uno == false){
			        		TECLA.uno=true;
			        	}else{
			        		TECLA.uno=false;
			        	}
			            break;
			        case 50: // 2
			            if (TECLA.dos == false){
			        		TECLA.dos=true;
			        	}else{
			        		TECLA.dos=false;
			        	}
			            break;
			        case 51: // 3
			            if (TECLA.tres == false){
			        		TECLA.tres=true;
			        	}else{
			        		TECLA.tres=false;
			        	}
			            break;
			        case 52: // 4
			            if (TECLA.cuatro == false){
			        		TECLA.cuatro=true;
			        	}else{
			        		TECLA.cuatro=false;
			        	}
			            break;
			        case 53: // 5
			            if (TECLA.cinco == false){
			        		TECLA.cinco=true;
			        	}else{
			        		TECLA.cinco=false;
			        	}
			            break;
			        case 54: // 6
			            if (TECLA.seis == false){
			        		TECLA.seis=true;
			        	}else{
			        		TECLA.seis=false;
			        	}
			            break;
			        case 55: // 7
			            if (TECLA.siete == false){
			        		TECLA.siete=true;
			        	}else{
			        		TECLA.siete=false;
			        	}
			            break;
			    }
			}
			
			function animateOpenClose (esperiodica){
				if (esperiodica){
					
					
				}
				
			}

		</script>

	</body>
</html>